{
    "category": "Configuration - Decimal Places",
    "description": "Tests that decimalPlaces config doesn't affect calculation precision (formatting only)",
    "tests": [
        {
            "id": "decimal_places_full_precision_001",
            "input": "pi",
            "expected": 3.141592653589793,
            "expectedType": "NodeDouble",
            "config": {
                "decimalPlaces": -1
            },
            "notes": "Full precision pi with decimalPlaces=-1"
        },
        {
            "id": "decimal_places_not_affect_calc_001",
            "input": "pi",
            "expected": 3.141592653589793,
            "expectedType": "NodeDouble",
            "config": {
                "decimalPlaces": 2
            },
            "notes": "decimalPlaces only affects formatting, not the actual value stored"
        },
        {
            "id": "decimal_places_not_affect_calc_002",
            "input": "1/3",
            "expected": 0.3333333333333333,
            "expectedType": "NodeDouble",
            "config": {
                "forceDoubleArithmetic": true,
                "decimalPlaces": 4
            },
            "notes": "Internal calculation still full precision even with decimalPlaces=4"
        },
        {
            "id": "decimal_places_not_affect_calc_003",
            "input": "sin(1)",
            "expected": 0.8414709848078965,
            "expectedType": "NodeDouble",
            "config": {
                "decimalPlaces": 2
            },
            "notes": "Trig functions calculated at full precision regardless of decimalPlaces"
        },
        {
            "id": "decimal_places_chain_calc_001",
            "input": "x := pi; y := x * 2; y / 2",
            "expected": 3.141592653589793,
            "expectedType": "NodeDouble",
            "config": {
                "decimalPlaces": 1
            },
            "notes": "Chained calculations use full precision internally"
        },
        {
            "id": "decimal_places_chain_calc_002",
            "input": "a := 1/3; b := a * 3; b",
            "expected": 1.0,
            "expectedType": "NodeDouble",
            "config": {
                "forceDoubleArithmetic": true,
                "decimalPlaces": 2
            },
            "notes": "Intermediate results stored at full precision"
        },
        {
            "id": "decimal_places_vector_001",
            "input": "{pi, e, sqrt(2)}",
            "expected": [
                3.141592653589793,
                2.718281828459045,
                1.4142135623730951
            ],
            "expectedType": "NodeVector",
            "config": {
                "decimalPlaces": 3
            },
            "notes": "Vector elements stored at full precision"
        },
        {
            "id": "decimal_places_accumulation_001",
            "input": "sum({0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1})",
            "expected": 1.0,
            "expectedType": "NodeDouble",
            "tolerance": 1e-10,
            "config": {
                "decimalPlaces": 0
            },
            "notes": "Accumulation errors occur at machine precision, not decimalPlaces"
        }
    ]
}
